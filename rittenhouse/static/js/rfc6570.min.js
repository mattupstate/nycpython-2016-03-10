!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):"undefined"!=typeof window?window.rfc6570=e():"undefined"!=typeof global?global.rfc6570=e():"undefined"!=typeof self&&(self.rfc6570=e())}(function(){return function e(n,r,t){function i(s,a){if(!r[s]){if(!n[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var p=r[s]={exports:{}};n[s][0].call(p.exports,function(e){var r=n[s][1][e];return i(r?r:e)},p,p.exports,e,n,r,t)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<t.length;s++)i(t[s]);return i}({1:[function(e,n,r){function t(){var e=[];this.add=function(n,r){e.push({template:new i(n),handler:r})},this.handle=function(n){return e.some(function(e){var r=e.template.parse(n);return r&&e.handler(r)!==!1})}}var i=e("./UriTemplate");n.exports=t},{"./UriTemplate":2}],2:[function(e,n,r){function t(e){var n="-._~";return o(e)?"":(e=e.toString(),Array.prototype.map.call(e,function(e){var r=e.charCodeAt(0);return r>=48&&57>=r?e:r>=65&&90>=r?e:r>=97&&122>=r?e:~n.indexOf(e)?e:"%"+r.toString(16).toUpperCase()}).join(""))}function i(e){return!o(e)}function o(e){return null===e?!0:void 0===e?!0:Array.isArray(e)&&0===e.length?!0:!1}function s(e){function n(e){var n=s.exec(e);return{name:n[1],maxLength:n[2]&&parseInt(n[2].substring(1),10),composite:!!n[3]}}for(var r,t=/\{([\+#\.\/;\?&=\,!@\|]?)([A-Za-z0-9_\,\.\:\*]+?)\}/g,s=/^([\$_a-z][\$_a-z0-9]*)((?:\:[1-9][0-9]?[0-9]?[0-9]?)?)(\*?)$/i,u=[],p=[],f=0,c=0;r=t.exec(e);){if(p.push(e.substring(f,r.index)),r[1]&&~"=,!@|".indexOf(r[1]))throw"operator '"+r[1]+"' is reserved for future extensions";f=r.index,u.push({operator:r[1],variables:r[2].split(",").map(n)}),f+=r[0].length,c++}p.push(e.substring(f)),this.parse=function(e){var n={},r=0,t=[];return p.every(function(n,i){var o;return o=i>0&&""===n?e.length:e.indexOf(n,r),r=o,t.push(r),r+=n.length,~o})&&u.every(function(r,i){var o,s,u=a[r.operator],f=t[i]+p[i].length,c=t[i+1];return o=e.substring(f,c),0===o.length?!0:o.substring(0,u.prefix.length)!==u.prefix?!1:(o=o.substring(u.prefix.length),s=o.split(u.seperator),r.variables.every(function(e,r){var t,i=s[r];if(void 0===i)return!0;if(t=e.name,u.assignment){if(i.substring(0,t.length)!==t)return!1;if(i=i.substring(t.length),0===i.length&&u.assignEmpty)return!1;if(i.length>0){if("="!==i[0])return!1;i=i.substring(1)}}return i=decodeURIComponent(i),n[t]=i,!0})?!0:!1)})?n:!1},this.stringify=function(e){var n="";return e=e||{},n+=p[0],u.every(function(r,t){var s,u=a[r.operator];return s=r.variables.map(function(n){var r=e[n.name];return Array.isArray(r)||(r=[r]),r=r.filter(i),o(r)?null:(n.composite?(r=r.map(function(e){return"object"==typeof e?e=Object.keys(e).map(function(r){var t=e[r];return n.maxLength&&(t=t.substring(0,n.maxLength)),t=u.encode(t),t?t=r+"="+t:(t=r,u.assignEmpty&&(t+="=")),t}).join(u.seperator):(n.maxLength&&(e=e.substring(0,n.maxLength)),e=u.encode(e),u.assignment&&(e?e=n.name+"="+e:(e=n.name,u.assignEmpty&&(e+="=")))),e}),r=r.join(u.seperator)):(r=r.map(function(e){return"object"==typeof e?Object.keys(e).map(function(r){var t=e[r];return n.maxLength&&(t=t.substring(0,n.maxLength)),r+","+u.encode(t)}).join(","):(n.maxLength&&(e=e.substring(0,n.maxLength)),u.encode(e))}),r=r.join(","),u.assignment&&(r?r=n.name+"="+r:(r=n.name,u.assignEmpty&&(r+="=")))),r)}),s=s.filter(i),i(s)&&(n+=u.prefix,n+=s.join(u.seperator)),n+=p[t+1],!0})?n:!1}}n.exports=s;var a={"":{prefix:"",seperator:",",assignment:!1,assignEmpty:!1,encode:t},"+":{prefix:"",seperator:",",assignment:!1,assignEmpty:!1,encode:encodeURI},"#":{prefix:"#",seperator:",",assignment:!1,assignEmpty:!1,encode:encodeURI},".":{prefix:".",seperator:".",assignment:!1,assignEmpty:!1,encode:t},"/":{prefix:"/",seperator:"/",assignment:!1,encode:encodeURIComponent},";":{prefix:";",seperator:";",assignment:!0,assignEmpty:!1,encode:encodeURIComponent},"?":{prefix:"?",seperator:"&",assignment:!0,assignEmpty:!0,encode:encodeURIComponent},"&":{prefix:"&",seperator:"&",assignment:!0,assignEmpty:!0,encode:encodeURIComponent}}},{}],3:[function(e,n,r){n.exports={Router:e("./Router"),UriTemplate:e("./UriTemplate")}},{"./Router":1,"./UriTemplate":2}]},{},[3])(3)});
